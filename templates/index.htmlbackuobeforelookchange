<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GoldSrc RCON Web GUI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        function loadServer() {
            const name = document.getElementById('server').value;
            fetch(`/get_server/${name}`)
                .then(res => res.json())
                .then(data => {
                    document.getElementById('host').value = data.host || "";
                    document.getElementById('port').value = data.port || "";
                    document.getElementById('password').value = data.password || "";
                });
        }
    </script>
</head>
<body class="p-4">
    <div class="container">
        <h2 class="mb-4">GoldSrc RCON Web GUI</h2>
        <form method="POST">
            <div class="row mb-3">
                <div class="col">
                    <label>Saved Server</label>
                    <select name="server" id="server" class="form-select" onchange="loadServer()">
                        <option value="">-- Select --</option>
                        {% for name in servers %}
                        <option value="{{name}}">{{name}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col">
                    <label>Or Add New</label>
                    <input name="new_name" class="form-control" placeholder="New server name">
                </div>
            </div>
            <div class="row mb-3">
                <div class="col"><input name="host" id="host" class="form-control" placeholder="Host" required></div>
                <div class="col"><input name="port" id="port" class="form-control" placeholder="Port" required></div>
                <div class="col"><input name="password" id="password" class="form-control" placeholder="Password" required></div>
            </div>
            <div class="row mb-3">
                <div class="col-8"><input name="command" class="form-control" placeholder="Custom command"></div>
                <div class="col-4"><button class="btn btn-primary w-100">Send</button></div>
            </div>
            <div class="row mb-3">
                <div class="col">
                    <select name="map" class="form-select">
                        <option value="">-- Change Map --</option>
                        {% for m in maps %}
                        <option value="{{m}}">{{m}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col">
                    <input name="kick" class="form-control" placeholder="Kick player">
                </div>
            </div>
        </form>
        <textarea rows="15" class="form-control mt-4" readonly>{{ output }}</textarea>
    </div>
</body>
</html>
