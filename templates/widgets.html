<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Widgets</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white p-6">
<a href="/dashboard" class="bg-gray-700 px-2 py-1 rounded">&larr; Back</a>
<h1 class="text-2xl my-4">Widget Settings</h1>
<form method="POST">
    {% for name in widgets %}
    <div class="mb-2">
        <label>
            <input type="checkbox" name="name" value="{{ name }}" {% if name in enabled %}checked{% endif %} onchange="toggle(this)">
            {{ name }}
        </label>
    </div>
    {% endfor %}
</form>
<script>
function toggle(el){
    fetch('/widgets',{
        method:'POST',
        headers:{'X-CSRFToken':'{{ csrf_token() }}'},
        body:new URLSearchParams({name:el.value,state:el.checked?'on':'off'})
    }).then(()=>location.reload());
}
</script>
</body>
</html>
